# Домашнее задание к занятию 14 «Микросервисы: подходы» Кандала Кирилл
## Задание 1

Выбранное решение:

GitLab CI/CD (облачная версия или self-hosted) + Docker + Kubernetes (опционально).

Обоснование:

Облачная система
GitLab SaaS (gitlab.com) или развертывание в облаке (AWS, GCP, Azure).
Альтернатива: GitHub Actions + ArgoCD (но GitLab удобнее для полного CI/CD цикла).

Система контроля версий Git
GitLab базируется на Git, поддерживает репозитории, ветки, MR/PR.

Репозиторий на каждый сервис
В GitLab можно создавать отдельные проекты (репозитории) для каждого сервиса.

Запуск сборки по событию из системы контроля версий
GitLab CI/CD запускает пайплайны при пуше, мердж-реквесте, теге и т. д.

Запуск сборки по кнопке с указанием параметров
Поддерживается через Manual Jobs и Pipeline Triggers с переменными.

Настройки для каждой сборки
Переменные пайплайна (variables), в том числе защищенные (protected).

Шаблоны для конфигураций сборок
Можно использовать include и extends в .gitlab-ci.yml или шаблоны в CI/CD Catalog.

Безопасное хранение секретов
GitLab Variables (зашифрованные), HashiCorp Vault (интеграция).

Несколько конфигураций сборки из одного репозитория
Разные jobs в .gitlab-ci.yml с правилами (rules, only/except).

Кастомные шаги при сборке
В .gitlab-ci.yml можно определить любые шаги (script, before_script, after_script).

Собственные Docker-образы для сборки
В image: указывается любой образ, можно хранить в GitLab Container Registry.

Развертывание агентов на своих серверах
GitLab Runner можно установить на свои серверы (поддерживает Docker, Kubernetes, Shell).

Параллельный запуск сборок
Параллельные jobs (parallel:), несколько раннеров.

Параллельный запуск тестов
Разделение тестов на группы (parallel:matrix, test_suite).
---
Альтернативы:
GitHub Actions + ArgoCD (если нужен GitHub + GitOps).
Jenkins + Git (но требует больше настройки).

## Задание 2

###Выбранное решение:

Loki + Promtail + Grafana (ELK – альтернатива, но Loki легче).

###Обоснование:

####Сбор логов в центральное хранилище
Promtail собирает логи и отправляет в Loki.

####Минимальные требования, сбор из stdout
Promtail читает логи контейнеров (Docker, Kubernetes) и файлы.

####Гарантированная доставка
Loki поддерживает репликацию, Promtail буферизует логи при сбоях.

####Поиск и фильтрация
LogQL (аналог PromQL) для фильтрации.

####Пользовательский интерфейс
Grafana (подключается к Loki), можно давать доступ разработчикам.

####Ссылка на сохранённый поиск
В Grafana можно сохранять dashboard и делиться ссылками.

###Альтернативы:
ELK (Elasticsearch + Logstash + Kibana) – мощнее, но сложнее в поддержке.
Fluentd + Elasticsearch – если нужна гибкость парсинга.

## Задание 3

###Выбранное решение:

Prometheus + Grafana + node_exporter + kube-state-metrics (если Kubernetes)

###Обоснование:

####Сбор метрик со всех хостов
node_exporter – метрики хостов (CPU, RAM, Disk, Network).
kube-state-metrics – метрики Kubernetes (если используется).

####Метрики состояния ресурсов
Prometheus собирает данные от node_exporter.

####Метрики по сервисам
Приложения могут экспортировать метрики в Prometheus (клиенты для Python, Go и др.).

####Специфичные метрики сервисов
Разработчики добавляют кастомные метрики (например, http_requests_total).

####Пользовательский интерфейс для запросов
Grafana + PromQL (дашборды, алерты).

####Настройка панелей
В Grafana можно создавать и сохранять дашборды.

###Альтернативы:
VictoriaMetrics – если нужна масштабируемость.
Datadog / New Relic – платные SaaS-решения.
